
<script type="text/javascript">
$(function(){
	
	$.datepicker.setDefaults($.extend($.datepicker.regional['ru']));
	
	$("#has_dog%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_no_dog%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	$("#has_no_dog%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_dog%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	
	
	$("#has_dog_in%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_no_dog_in%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	$("#has_no_dog_in%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_dog_in%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	
	
	$("#has_uch%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_no_uch%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	$("#has_no_uch%{$prefix}%").bind("change",function(){
		if($(this).prop("checked")){
			 $("#has_uch%{$prefix}%").prop("checked",false);
			
		}else{
			
		}
	});
	
	function split( val ) {
			return val.split( /;\s*/ );
		}
		function extractLast( term ) {
			return split( term ).pop();
		}

		$( "#supplier_name%{$prefix}%" )
			// don't navigate away from the field on tab when selecting an item
			.bind( "keydown", function( event ) {
				if ( event.keyCode === $.ui.keyCode.TAB &&
						$( this ).data( "autocomplete" ).menu.active ) {
					event.preventDefault();
				}
			})
			.autocomplete({
				source: function( request, response ) {
					$.getJSON( "/js/an_supplier.php", {
						term: extractLast( request.term )
					}, response );
				},
				search: function() {
					// custom minLength
					var term = extractLast( this.value );
					if ( term.length < 2 ) {
						return false;
					}
				},
				focus: function() {
					// prevent value inserted on focus
					return false;
				},
				select: function( event, ui ) {
					var terms = split( this.value );
					// remove the current input
					terms.pop();
					// add the selected item
					terms.push( ui.item.value );
					// add placeholder to get the comma-and-space at the end
					terms.push( "" );
					this.value = terms.join( "; " );
					return false;
				}
			});
	

	
});
</script>



<form action="%{$pagename}%" method="get" id="rep_form%{$prefix}%">
<input type="hidden" name="print" value="0" id="print" />
<input type="hidden" name="tab_page" value="%{$prefix}%" id="tab_page" />

<input type="hidden" name="sortmode%{$prefix}%" value="%{$sortmode}%" id="print" />


<div style="white-space:nowrap;">

%{include file="every_help_dialog.html" filename="an_original_dog.htm" prefix=$prefix description="отчет оригиналы документов"  style="float:right;  margin-right:10px;"}%

<div style="float:left; margin-right:20px;">

<label for="supplier_name%{$prefix}%">Контрагент:</label><br />
<input name="supplier_name%{$prefix}%" id="supplier_name%{$prefix}%" size="15" maxlength="255" value="%{$supplier_name}%" style="width:145px;" />



</div>



<div style="float:left; margin-right:20px;">
<br />



<div style="display:none;">
<input type="checkbox" name="has_dog%{$prefix}%" id="has_dog%{$prefix}%" value="1" %{if $has_dog==1}%checked="checked"%{/if}% /><label for="has_dog%{$prefix}%">Наличие оригинала исходящего договора</label>

<br />

<input type="checkbox" name="has_dog_in%{$prefix}%" id="has_dog_in%{$prefix}%" value="1" %{if $has_dog_in==1}%checked="checked"%{/if}% /><label for="has_dog_in%{$prefix}%">Наличие оригинала входящего договора</label>

<br />

<input type="checkbox" name="has_uch%{$prefix}%" id="has_uch%{$prefix}%" value="1" %{if $has_uch==1}%checked="checked"%{/if}% /><label for="has_uch%{$prefix}%">Наличие оригинала учредительных документов</label>

<br />
</div>


<input type="checkbox" name="has_no_dog%{$prefix}%" id="has_no_dog%{$prefix}%" value="1" %{if $has_no_dog==1}%checked="checked"%{/if}% /><label for="has_no_dog%{$prefix}%">Отсутствие оригинала исходящего договора</label>

<br />

<input type="checkbox" name="has_no_dog_in%{$prefix}%" id="has_no_dog_in%{$prefix}%" value="1" %{if $has_no_dog_in==1}%checked="checked"%{/if}% /><label for="has_no_dog_in%{$prefix}%">Отсутствие оригинала входящего договора</label>

<br />

<input type="checkbox" name="has_no_uch%{$prefix}%" id="has_no_uch%{$prefix}%" value="1" %{if $has_no_uch==1}%checked="checked"%{/if}% /><label for="has_no_uch%{$prefix}%">Отсутствие оригинала учредительных документов</label>

<br />

</div>




<div style="float:left;  margin-right:20px;"><br />

<input type="image" name="doSub%{$prefix}%" id="doSub%{$prefix}%" src="/img/icons/old-zoom-original.png" border="0" alt="Найти" title="Найти" />

<a href="original.php?doSub%{$prefix}%=1&has_no_dog%{$prefix}%=1&has_no_dog_in%{$prefix}%=1&has_no_uch%{$prefix}%=1"><img src="/img/icons/old-zoom-deselect.png" width="24" height="24" alt="Сбросить все фильтры" title="Сбросить все фильтры" border="0"  /></a>

  
  %{if $can_print}%
  
   
  
  
  <a href="#" id="print_table%{$prefix}%"><img src="/img/icons/print.png" width="24" height="24" alt="Печать..." title="Печать..." border="0"  /></a>
  
  
  <script type="text/javascript">
  $(function(){
	
	  $("#print_table%{$prefix}%").bind("click",function(){
	  		
			has_dog=''; has_dog_in='';
			has_uch='';
			has_no_dog=''; has_no_dog_in='';
			has_no_uch='';
			
			if($("#has_dog%{$prefix}%").prop("checked")) has_dog='&has_dog%{$prefix}%=1';
			
			if($("#has_dog_in%{$prefix}%").prop("checked")) has_dog_in='&has_dog_in%{$prefix}%=1';
			
			if($("#has_uch%{$prefix}%").prop("checked")) has_uch='&has_uch%{$prefix}%=1';
			
			if($("#has_no_dog%{$prefix}%").prop("checked")) has_no_dog='&has_no_dog%{$prefix}%=1';
			
			if($("#has_no_dog_in%{$prefix}%").prop("checked")) has_no_dog_in='&has_no_dog_in%{$prefix}%=1';
			
			if($("#has_no_uch%{$prefix}%").prop("checked")) has_no_uch='&has_no_uch%{$prefix}%=1';
			
			
		
		 	 window.open('original.php?tab_page=%{$prefix}%&print='+'1'+'&supplier_name%{$prefix}%='+$("#supplier_name%{$prefix}%").val()+'&sortmode%{$prefix}%='+'%{$sortmode}%'+has_dog+has_uch+has_no_dog+has_no_uch+has_dog_in+has_no_dog_in, 'original','width=1100,height=700,toolbar=1,menubar=1,resizable=1,status=1,scrollbars=1');
		 
		
		 return false; 
	  });
	  
  });
  </script>
  
  %{else}%
  <a href="#" onclick="alert('У Вас недостаточно прав для печати отчета.'); return false;"><img src="/img/icons/print-gr.png" width="24" height="24" alt="печать..." title="печать..." border="0" /></a>
 %{/if}%
  

  
</div>

</div>

<br clear="all" />

<div>
<small>


Фильтр  <strong>"Контрагент"</strong>. <br />



Вы можете получить отчет по нескольким контрагентам.
<br />
Для этого в форму поиска нужно вписать фрагмент названия искомого контрагента.
Программа выдаст список вариантов названий. Выберите в списке требуемого контрагента щелчком мыши по его названию.
При необходимости отобрать в отчет документы по еще одному контрагенту - снова наберите фрагмент его названия и выберите контрагента из всплывшего списка вариантов названий контрагентов.


</small>  
  
</div>


<style type="text/css">
	.blacktable th.small, td.small{
		font-size:10px !important;
		color:#666;	
	}
</style>

<p />





%{if $do_it}%
<table width="*" border="1" cellspacing="0" cellpadding="3" class="blacktable">
 <thead>
  <tr align="center" valign="top">
   
    <th scope="col" width="100">Контрагент 
    
     <div class="sort_dir">
    <a href="%{$link}%&sortmode%{$prefix}%=1"><img src="/img/up.gif" border="0" alt="" width="11" height="16" /></a>
    <a href="%{$link}%&sortmode%{$prefix}%=0"><img src="/img/down.gif" border="0" alt="" width="11" height="16" /></a>
    </div>
    </th>
    
     <th scope="col" width="60">Код контрагента
    
    <div class="sort_dir">
    <a href="%{$link}%&sortmode%{$prefix}%=3"><img src="/img/up.gif" border="0" alt="" width="11" height="16" /></a>
    <a href="%{$link}%&sortmode%{$prefix}%=2"><img src="/img/down.gif" border="0" alt="" width="11" height="16" /></a>
    </div>
    </th>
    
   
    <th scope="col" width="*">Нет оригиналов:</th>
   
 
  </tr>
  
  
 </thead>
 <tbody>
   %{section name=rowsec loop=$items}%
   <tr align="left" valign="top">
    
    
    
    
     
     <td width="100"><a href="supplier.php?action=1&id=%{$items[rowsec].id}%" target="_blank">%{$items[rowsec].full_name}%, %{$items[rowsec].opf_name}%</a> </td>
     
     <td width="100">  %{$items[rowsec].code}% </td>
     
   
    
    <td width="*">
    
   %{if $items[rowsec].has_dog==0}%<strong>-исходящего договора </strong><br />
	%{/if}%
    
     %{if $items[rowsec].has_dog_in==0}%<strong>-входящего договора </strong><br />
	%{/if}%
    
    
    %{if $items[rowsec].has_uch==0}%<strong> -учредительных документов </strong><br />
	%{/if}%
    
  
    </td>
     
     
   
     
   </tr>
   %{/section}%
  </tbody>
</table>

<p />

<strong>Итого: отcутствует документов: %{$count_of_docs}% по %{$count_of_suppliers}% контрагентам.</strong>

%{/if}%    

</form>